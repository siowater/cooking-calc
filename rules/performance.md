# パフォーマンス最適化 (Performance Optimization)

## モデル選択戦略 (Model Selection Strategy)

**Haiku 4.5** (Sonnetの90%の能力、3倍のコスト削減):

* 頻繁に呼び出される軽量エージェント
* ペアプログラミングとコード生成
* マルチエージェントシステム内のワーカーエージェント

**Sonnet 4.5** (最高のコーディングモデル):

* メインの開発作業
* マルチエージェントワークフローのオーケストレーション
* 複雑なコーディングタスク

**Opus 4.5** (最も深い推論):

* 複雑なアーキテクチャ上の決定
* 最大限の推論要件
* リサーチおよび分析タスク

## コンテキストウィンドウ管理 (Context Window Management)

以下の場合、コンテキストウィンドウの最後の20%の使用は避けてください：

* 大規模なリファクタリング
* 複数のファイルにまたがる機能実装
* 複雑な相互作用のデバッグ

コンテキスト感度の低いタスク（これらはウィンドウ後半でも可）：

* 単一ファイルの編集
* 独立したユーティリティの作成
* ドキュメントの更新
* 単純なバグ修正

## Ultrathink + Plan Mode

深い推論を必要とする複雑なタスクの場合：

1. 思考を強化するために `ultrathink` を使用する
2. 構造化されたアプローチのために **Plan Mode** を有効にする
3. 複数の批評ラウンドを行い、「エンジンを回す（思考を深める）」
4. 多角的な分析のために、役割分担されたサブエージェントを使用する

## ビルドトラブルシューティング (Build Troubleshooting)

ビルドが失敗した場合：

1. **build-error-resolver** エージェントを使用する
2. エラーメッセージを分析する
3. 段階的に修正する
4. 各修正後に検証する

